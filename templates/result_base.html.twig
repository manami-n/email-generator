<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Email Generator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>
  <body class="pt-5">

    <main class="container-fluid bg-body px-3 py-4">
        <h1 class="text-center mb-3 display-4">Email Generator</h1>
        <div class="mb-3 col-md-11 mx-auto">
            <div class="d-flex flex-row p-1 justify-content-between bg-secondary-subtle">
                <button class="btn" onclick="back()"><i class="bi bi-arrow-left"></i> Back</button>
                <div>
                  <button class="btn" onclick="copy()"><i class="bi bi-copy"></i> Copy code</button>
                </div>
            </div>
             <div class="d-flex flex-row flex-wrap justify-content-between">
                <pre class="text-bg-dark col-6 px-3 overflow-auto" style="margin: 0; max-height: 600px">
                  <code id="code">{% block code %}
                  {% endblock %}</code>
                </pre>
                <iframe id="previewFrame" class="col-6 bg-primary">
                </iframe>
              </div>
        </div>
        <div class="mb-3 col-md-11 mx-auto">
            <h2 class="fs-3">How to use</h2>
               
            <p>You can copy and paste the code, customize the texts and/or remove the button(link) as needed.</p>
            <p>Below is the list of default parameters. Please search the parameter, and change the link url and image root/name before sending it.</p>
            <ul>
                <li>Default button(link) : <span class="text-primary">href="#"</span></li>
                <li>Default logo name : <span class="text-primary">logo.png</span></li>
                <li>Default header name : <span class="text-primary">header.png</span></li>
            </ul>
        </div>
        
    </main>
    <script>
      // Copy function
      function copy() {
          var copyText = document.getElementById("code");
          console.log(copyText.innerHTML);
          navigator.clipboard.writeText(copyText.innerText);
      }
      // Back function
      function back() {
          window.history.back();
      }
      // Preview function
      document.addEventListener('DOMContentLoaded', () => {
      //function preview() {
          var copyText = document.getElementById("code").innerText;
          var iframe = document.getElementById('previewFrame');
          iframe.srcdoc = copyText;
          //window.open("/preview", "_blank");
      });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  </body>
</html>