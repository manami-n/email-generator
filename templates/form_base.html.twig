<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Email Generator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  </head>
  <body class="pt-5">

    <main class="container-md bg-body px-3 py-4 col-md-8">
        <h1 class="text-center mb-3 display-4">Email Generator</h1>
        <div class="row">
        <!-- FORM -->
        <form class="col-md-6" method="POST" action="{{url('sent_form')}}">
        <div class="mb-3">
                <h2>Layout</h2>
                <!-- Choose header type -->
                <div class="form-floating">
                    <select class="form-select" id="header-type" name="hd_type">
                        <option selected>Choose one type</option>
                        <option value="with_hd">With header image</option>
                        <option value="wo_hd">No header image</option>
                    </select>
                    <label for="header-type">Header type</label>
                </div>
                <p id="error" class="text-danger" style="display: none;">Please choose one type</p>
                <!-- Field for header image -->
                <fieldset id="with_hd" class="px-3 border-start border-3 mt-3" style="display: none;">
                    <!-- Logo checkbox -->
                    <h3 class="fs-6">Logo besides the header image</h3>
                    <div class="form-check checkbox-lg">
                        <input class="form-check-input" type="checkbox" value="" id="logo_checked" checked>
                        <label class="form-check-label" for="logo_checked">Yes, it has a logo</label>
                    </div>
                </fieldset>
                
                <!-- Field for withou header image -->
                <fieldset id="wo_hd" class="px-3 border-start border-3 mt-3" style="display: none;">
                    <!-- Shape radio -->
                    <h3 class="fs-6">Choose the shape</h3>
                    
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="shape" id="square" value="square" checked>
                        <label class="form-check-label" for="square">Square</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="shape" id="round" value="round">
                        <label class="form-check-label" for="round">Round</label>
                    </div>

                    <!-- Logo radio -->
                    <h3 class="fs-6 mt-3">Logo position against the container</h3>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="logo" id="logo_out" value="logo_out" checked>
                        <label class="form-check-label" for="logo_out">Outside</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="logo" id="logo_in" value="logo_in">
                        <label class="form-check-label" for="logo_in">Inside</label>
                    </div>
                        <input class="" type="radio" name="logo" id="logo_none" value="logo_none" style="display: none;">
                </fieldset>

                <!-- Footer radio -->
                <fieldset id="any_hd" class="px-3 border-start border-3" style="display: none;">
                    <h3 class="fs-6 mt-3">Footer position against the container</h3>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="footer" id="footer_out" value="footer_out" checked>
                        <label class="form-check-label" for="footer_out">Outside</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="footer" id="footer_in" value="footer_in">
                        <label class="form-check-label" for="footer_in">Inside</label>
                    </div>
                </fieldset>
            </div>
            <div>
                <h2>Colors</h2>
                <fieldset id="with_hd" class="p-3 border-start border-3 my-3">
                    <div class="form-inline row mb-2">
                        <label for="key_color" class="form-label col-md-8">Primary/Key color</label>
                        <input type="color" class="form-control form-control-color col-1" id="key_color" name="color_key" value="#F4BF3A" title="Primary/Key Color">
                    </div>
                    <div class="form-inline row mb-2">
                        <label for="bg_color" class="form-label col-md-8">Background color</label>
                        <input type="color" class="form-control form-control-color col-1" id="bg_color" name="color_bg" value="#ECF1F7" title="Primary/Key Color">
                    </div>
                    <div class="form-inline row">
                        <label for="footer_color" class="form-label col-md-8">Footer text color</label>
                        <input type="color" class="form-control form-control-color col-1" id="footer_color" name="color_footer" value="#636363" title="Primary/Key Color">
                    </div>
                </fieldset>
            </div>
            <div>
                <h2>Typography</h2>
                <fieldset id="with_hd" class="p-3 border-start border-3 my-3">
                    <div >
                        <label for="font_family" class="form-label">Choose or type the font family</label>
                        <input type="text" class="form-control" list="fontOptions" id="font_family" name="f_fami" required>
                        <datalist id="fontOptions">
                            <option value="Arial, sans-serif">
                            <option value="'Courier New', monospace">
                            <option value="Georgia, Times, serif">
                            <option value="Helvetica, sans-serif">
                            <option value="'Lucida Sans', Verdana, sans-serif">
                            <option value="Tahoma, Verdana, sans-serif">
                            <option value="'Times New Roman', Times, serif">
                        </datalist>
                    </div>
                    <div class="form-inline row">
                        <h3 class="fs-6 mt-3">Choose the font size</h3>
                        <div class="input-group col-1">
                            <input type="number" class="form-control" aria-label="font size" aria-describedby="basic-addon2" value="16" id="font_size" name="f_size" required>
                            <span class="input-group-text" id="basic-addon2">px</span>
                        </div>
                    </div>
                </fieldset>
            </div>
            <div class="text-center">
                <button type="submit" class="btn btn-primary" id="submit">Generate</button>
            </div>
        </form>
        <!-- Sample -->
        <div class="col-md-6 p-3">
            <div id="bg" class="bg-body-tertiary py-2" style="display: none;">
                <div id="logo-out" class="bg-secondary mx-auto mb-2" style="width: 50px; height:50px; border-radius: 50%;"></div>
                <div id="header" class="bg-secondary mx-auto" style="width: 80%; height:80px;"></div>
                <div id="container" class="bg-white mx-auto p-4" style=" width: 80%;">
                    <div id="logo-in" class="bg-secondary mx-auto" style="width: 50px; height:50px; border-radius: 50%;"></div>
                    <p class="text bg-secondary-subtle my-2" style="width: 100%; height: 20px;"></p>
                    <p class="text bg-secondary-subtle my-2" style="width: 100%; height: 20px;"></p>
                    <div id="link" class="bg-dark-subtle my-4 mx-auto" style="width: 40%; height: 40px;"></div>
                    <p class="text bg-secondary-subtle my-2" style="width: 100%; height: 20px;"></p>
                    <p id="footer-in" class="text footer bg-secondary-subtle my-4" style="width: 100%; height: 70px;"></p>
                </div>
                <div id="footer-out" class="text footer bg-secondary-subtle my-4 mx-auto" style="width: 80%; height: 70px;"></div>
            </div>
        </div>
    </div>
    </main>
     <script>
    document.addEventListener('DOMContentLoaded', () => {
        // DOM for layout
        const headerSelect = document.getElementById("header-type");
        const with_hd = document.getElementById("with_hd");
        const wo_hd = document.getElementById("wo_hd");
        const any_hd = document.getElementById("any_hd");
        const logoCheckbox = document.getElementById("logo_checked"); // logo checkbox
        const footerRadios = document.getElementsByName("footer");
        const logoPositionRadios = document.getElementsByName("logo");
        const logoOutRadio = document.getElementById("logo_out"); // logo out for with_hd
        const logoNoneRadio = document.getElementById("logo_none"); // logo none for with_hd
        const shapeRadios = document.getElementsByName("shape");
        const shapeSquareRadio = document.getElementById("square"); // shape square for with_hd
        const error = document.getElementById("error") // error message
        // DOM for hover
        const fontFamilyInput = document.getElementById('font_family');
        const fontSizeInput = document.getElementById('font_size');
        const keyColorInput = document.getElementById('key_color');
        const bgColorInput = document.getElementById('bg_color');
        const footerColorInput = document.getElementById('footer_color');
        // DOM for sample
        const bgSample = document.getElementById("bg");
        const logoOutSample = document.getElementById("logo-out");
        const headerSample = document.getElementById("header");
        const containerSample = document.getElementById("container");
        const logoInSample = document.getElementById("logo-in");
        const textsSample = Array.from(document.getElementsByClassName("text"));
        const btnSample = document.getElementById("link");
        const footerSample = Array.from(document.getElementsByClassName("footer"));
        const footerInSample = document.getElementById("footer-in");
        const footerOutSample = document.getElementById("footer-out");
    

        // Update logo position based on checkbox state
        const updateLogoPosition = () => {
            if (logoCheckbox.checked) {
                logoOutRadio.checked = true;
            } else {
                logoNoneRadio.checked = true;
            }
        };

        logoCheckbox.addEventListener("change", updateLogoPosition); // logo position update

        function updateSample() {
            // getting form values
            const formValues = {
                headerType: headerSelect.value,
                shape: Array.from(shapeRadios).find(radio => radio.checked).value,
                logoPosi: Array.from(logoPositionRadios).find(radio => radio.checked).value,
                footerPosi: Array.from(footerRadios).find(radio => radio.checked).value,
            };
            console.log(formValues);
            
            
            if (formValues.headerType === "with_hd") { // chosen with header
                // inputs display
                error.style.display = "none";
                bgSample.style.display = "block";
                headerSample.style.display = "block";
                with_hd.style.display = "block";
                wo_hd.style.display = "none";
                any_hd.style.display = "block";
                // if logo_in is checked, remove
                if (formValues.logoPosi === "logo_in") {
                    logoNoneRadio.checked = true;
                    logoCheckbox.checked = false;
                    formValues.logoPosi = "logo_none";
                    logoInSample.style.display = "none";
                }

                 // shape is always square
                formValues.shape = "square"; 
                shapeSquareRadio.checked = true;
                containerSample.style.borderRadius = "0px";
                btnSample.style.borderRadius = "0px";
                

            } else if (formValues.headerType === "wo_hd") { // chosen without header
                // inputs display
                error.style.display = "none";
                bgSample.style.display = "block";
                headerSample.style.display = "none";
                with_hd.style.display = "none";
                wo_hd.style.display = "block";
                any_hd.style.display = "block";
                // if logo_none is checked, change to logo_out
                if (formValues.logoPosi === "logo_none") {
                    formValues.logoPosi = "logo_out";
                    logoOutRadio.checked = true;
                    logoOutSample.style.display = "block";
                }

            } else { // chosen none
                // inputs display
                bgSample.style.display = "none";
                with_hd.style.display = "none";
                wo_hd.style.display = "none";
                any_hd.style.display = "none";
            }

            // logo sample display
            if (formValues.logoPosi === "logo_out") {
                logoOutSample.style.display = "block";
                logoInSample.style.display = "none";
            } else if (formValues.logoPosi === "logo_in") {
                logoOutSample.style.display = "none";
                logoInSample.style.display = "block";
            } else {
                logoOutSample.style.display = "none";
                logoInSample.style.display = "none";
            }

            // footer sample display
            if (formValues.footerPosi === "footer_out") {
                footerOutSample.style.display = "block";
                footerInSample.style.display = "none";
            } else {
                footerOutSample.style.display = "none";
                footerInSample.style.display = "block";
            }

            // shape sample display
            if (formValues.shape === "round") {
                containerSample.style.borderRadius = "16px";
                btnSample.style.borderRadius = "20px";
            } else {
                containerSample.style.borderRadius = "0px";
                btnSample.style.borderRadius = "0px";
            }


        }
    
        headerSelect.addEventListener("change", updateSample);
        logoCheckbox.addEventListener("change", updateSample);
        shapeRadios.forEach(radio => radio.addEventListener("change", updateSample));
        footerRadios.forEach(radio => radio.addEventListener("change", updateSample));
        logoPositionRadios.forEach(radio => radio.addEventListener("change", updateSample));

        // --------- HOVER -----------
        // font family hover
        fontFamilyInput.addEventListener('mouseenter', () => text_in() );
        fontFamilyInput.addEventListener('mouseout', () => text_out() );
        // font size hover
        fontSizeInput.addEventListener('mouseenter', () => text_in() );
        fontSizeInput.addEventListener('mouseout', () => text_out() );
        // key color hover
        keyColorInput.addEventListener('mouseenter', () => {
            btnSample.classList.remove("bg-dark-subtle");
            btnSample.classList.add("bg-primary-subtle")
        });
        keyColorInput.addEventListener('mouseout', () => {
            btnSample.classList.remove("bg-primary-subtle");
            btnSample.classList.add("bg-dark-subtle");
        })
        // bg color hover
        bgColorInput.addEventListener('mouseenter', () => {
            bgSample.classList.remove("bg-body-tertiary");
            bgSample.classList.add("bg-primary-subtle")   
        });
        bgColorInput.addEventListener('mouseout', () => {
            bgSample.classList.remove("bg-primary-subtle");
            bgSample.classList.add("bg-body-tertiary");
        })
        // footer color hover
        footerColorInput.addEventListener('mouseenter', () => {
            footerSample.forEach((footer) => {
                footer.classList.remove("bg-secondary-subtle")
                footer.classList.add("bg-primary-subtle")
            }) 
        });
        footerColorInput.addEventListener('mouseout', () => {
            footerSample.forEach((footer) => {
                footer.classList.remove("bg-primary-subtle")
                footer.classList.add("bg-secondary-subtle")
            }) 
        });

        // Function for text color
        function text_in() {
            textsSample.forEach((text) => {
                text.classList.remove("bg-secondary-subtle")
                text.classList.add("bg-primary-subtle")
            })  
        }
        function text_out() {
            textsSample.forEach((text) => {
                text.classList.remove("bg-primary-subtle")
                text.classList.add("bg-secondary-subtle")
            }) 
        }    
        document.getElementById("submit").addEventListener("click", function(e){
            if (headerSelect.value === "Choose one type"){
                error.style.display = "block";
                return false;
            }
        })
    });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  </body>
</html>